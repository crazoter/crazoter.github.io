<!DOCTYPE html>
<html>
	<head>
		<meta charset="UTF-8"/>
		<meta http-equiv="Cache-Control" content="public"/>
		<meta name="viewport" content="width=device-width, initial-scale=1, minimum-scale=1.0, user-scalable=0"/>
		<meta name="description" content="EVAN TAY TAY TAAY"/>
		<title>EVAN IN ALL HIS GLORY</title>
		<link type="text/css" rel="stylesheet" href="css/bookshelf.css" media="screen,projection"/>
  		<link type="text/css" rel="stylesheet" href="node_modules/materialize-css/bin/materialize.css"  media="screen,projection"/>
		<style type="text/css">
			body {
    			margin: 0;
    		}
			.glorious.background {
				/* Set rules to fill background */
			  	min-height: 100%;min-width: 1024px;
			  	/* Set up proportionate scaling */
			  	width: 100%;height: auto;
			  	/* Set up positioning */
			  	position: fixed;top: 0;left: 0;
			}
			.glorious.evan {
				/*center horizontally*/
				position:absolute;left: 0;right: 0;margin: 0 auto;
    			/*glue to the ground*/
				max-width: 225px;bottom: 0px;
			}
			div#preloader {
				position:fixed;left:0;top:0;z-index:1000;width:100%;height:100%;overflow:visible;background:#F0F0F0
			}
			h1.preloader{text-align:center;position:relative;top:70%;transform:translateY(-70%);}
			div.title {
				z-index: 999;
			  	position: absolute;
			  	top: 0;
			  	color: #fff;
			  	background-color: #000;
			 	display: block;
			 	width: 100%;
			 	text-align: center;
			  	opacity: 0.5;
			  	filter: alpha(opacity=50);
			}
		</style>
		<script src="js/pagespeed/modernizr.js"></script>
	</head>
	<body>
		<!--preloader-->
		<div id="preloader">
			<h1 class="preloader">Loading</h1>
		</div>
		<!--header-->
		<div class="title">
			<i class="small mdi-notification-sync" onclick="random_img();"></i>
			<h5 id="h5_title">lol</h5>
		</div>
		<!--content-->
		<div>
			<img id="img_bg" class="glorious background" alt="">
			<div class="glorious evan">
				<img src="assets/joke/evan.png" alt="Evan TAY TAY TAAY HAHAHAHA WHAT ON EARTH">
			</div>
		</div>
		<script src="js/pagespeed/jquery.js"></script>
		<script src="node_modules/imagesloaded/imagesloaded.pkgd.js"></script><!--img onload handler-->
		<script type="text/javascript">
			var imgs;
			var img_bg;
			var preloader;
			var h5_title;
			function random_img () {
				if(imgs){
					//randomize src
					//preloader.show();
					var img_data = imgs[Math.floor(Math.random()*imgs.length)];
					h5_title.innerHTML = img_data.title;
					img_bg.src = img_data.link;
					preloaderOff();
				}
			}

			function preloaderOff () {
				preloader.hide();
			}

			//onload
			$(function() {
			    //Load stuff from Imgur API
			    img_bg = document.getElementById("img_bg");
			    preloader = $(document.getElementById("preloader"));
			    h5_title = document.getElementById("h5_title");
			    //imgLoad = imagesLoaded(img_bg);

			    $.ajax({ 
				    url: 'https://api.imgur.com/3/gallery/r/earthporn',//nsfw guys
				    headers: {
				        'Authorization': 'Client-ID 3bc8b402e145392'
				    },
				    type: 'GET',
				    success: function(xhr) { 
				    		//usually returns 60
				    		imgs = xhr.data;
				    		random_img();
				    	}
				});
			});

		</script>
	</body>
</html>